<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">

    <title>Reaching Consensus in the XRP Ledger - XRP Ledger Dev Portal</title>

    <!--[if lt IE 9]>
      <script src="/dist/js/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="/dist/js/respond/1.4.2/respond.min.js"></script>
    <![endif]-->


    <!-- favicon -->
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

    <!-- jQuery -->
    <script src="assets/vendor/jquery-1.11.1.min.js"></script>

    <!-- Custom Stylesheets. ripple.css includes bootstrap, font stuff -->
    <link href="assets/css/ripple.css" rel="stylesheet" />
    <link href="assets/css/devportal.css" rel="stylesheet" />

    <!-- Bootstrap JS -->
    <script src="assets/vendor/bootstrap.min.js"></script>

    <!-- fontawesome icons -->
    <link rel="stylesheet" href="assets/vendor/fontawesome/css/font-awesome.min.css" />


    <!-- syntax highlighting -->
    <link rel="stylesheet" href="assets/vendor/docco.min.css" />
    <script src="assets/vendor/highlight.min.js"></script>

    <!-- expandable code samples -->
    <script src="assets/js/expandcode.js"></script>
    <!-- multi-code selection tabs -->
    <script src="assets/js/multicodetab.js"></script>
    <script>
        $(document).ready(function() {
            $(".multicode").minitabs();
            hljs.initHighlighting();
            make_code_expandable();
        });
    </script>



</head>

<body class="xrp-ledger-dev-portal sidebar-primary">
  <header role="banner" class="banner navbar navbar-default navbar-fixed-top initial_header">
    <div class="container">
      <div class="navbar-header">
          <a href="index.html" class="navbar-brand"><img src="assets/img/dev-logo.png" class="logo" width="36" height="36" /><span class="brand-text">XRP Ledger Dev Portal</span></a>
      </div><!-- /.navbar-header -->
      <div class="nav">
            <ul class="breadcrumb">
              <li class="crumb-top"><a href="index.html" style="display: none;">&nbsp;</a></li>
              <li class="active crumb-category"><a href="concept-consensus.html">Technical Overview</a></li>
              <li class="active crumb-current">Reaching Consensus in the XRP Ledger</li>
            </ul>
        <div class="draft-warning">DRAFT PAGE</div>
        <div class="github-edit-wrap">
          <a href="https://github.com/ripple/ripple-dev-portal/edit/master/content/concept-reaching-consensus.md" target="_blank" class="github-edit">Edit on GitHub</a>
        </div><!-- /.github-edit -->
      </div><!-- /.nav -->

    </div><!-- /.container -->

  </header>


  <div class="wrap container" role="document" id="main_content_wrapper">
      <aside class="sidebar" role="complementary">

<div class="guide_toc">
  <div id="sidenav_accordion" class="panel-group" role="tablist" aria-multiselectable="true">
    <div class="panel panel-default">
      <div class="panel-heading" role="tab" id="sidenav_cat_head_1">
        <h5 class="panel-title">
          <a class="collapsed" role="button" data-toggle="collapse" data-parent="#sidenav_accordion" href="#sidenav_collapse_1" aria-expanded="true" aria-controls="sidenav_collapse_1">
            Introduction
          </a>
        </h5>
      </div><!-- /.panel-heading -->

      <div id="sidenav_collapse_1" class="collapse" role="tabpanel" aria-labelledby="sidenav_cat_head_1">
        <div class="panel-body">
          <ul class="sidebar_cat_pagelist">
              <li><a href="concept-xrp-ledger-intro.html">XRP Ledger Introduction</a></li>
          </ul>
        </div><!-- /.panel-body -->
      </div><!-- /#sidenav_collapse1 -->

    </div><!-- /.panel -->
    <div class="panel panel-default active">
      <div class="panel-heading" role="tab" id="sidenav_cat_head_2">
        <h5 class="panel-title">
          <a  role="button" data-toggle="collapse" data-parent="#sidenav_accordion" href="#sidenav_collapse_2" aria-expanded="true" aria-controls="sidenav_collapse_2">
            Technical Overview
          </a>
        </h5>
      </div><!-- /.panel-heading -->

      <div id="sidenav_collapse_2" class="collapse in" role="tabpanel" aria-labelledby="sidenav_cat_head_2">
        <div class="panel-body">
          <ul class="sidebar_cat_pagelist">
              <li><a href="concept-consensus.html">The XRP Ledger Consensus Process</a></li>
              <li><a class="active" href="#main_content_body">Reaching Consensus in the XRP Ledger</a></li>
              <li><a href="concept-accounts.html">XRP Ledger Accounts</a></li>
              <li><a href="concept-cryptographic-keys.html">Cryptographic Keys</a></li>
              <li><a href="concept-fees.html">Fees (Disambiguation)</a></li>
              <li><a href="concept-fee-voting.html">Fee Voting</a></li>
              <li><a href="concept-amendments.html">Amendments</a></li>
              <li><a href="reference-amendments.html">Known Amendments</a></li>
          </ul>
        </div><!-- /.panel-body -->
      </div><!-- /#sidenav_collapse2 -->

    </div><!-- /.panel -->
    <div class="panel panel-default">
      <div class="panel-heading" role="tab" id="sidenav_cat_head_3">
        <h5 class="panel-title">
          <a class="collapsed" role="button" data-toggle="collapse" data-parent="#sidenav_accordion" href="#sidenav_collapse_3" aria-expanded="true" aria-controls="sidenav_collapse_3">
            About XRP
          </a>
        </h5>
      </div><!-- /.panel-heading -->

      <div id="sidenav_collapse_3" class="collapse" role="tabpanel" aria-labelledby="sidenav_cat_head_3">
        <div class="panel-body">
          <ul class="sidebar_cat_pagelist">
              <li><a href="concept-money.html">Money in the XRP Ledger</a></li>
              <li><a href="concept-reserves.html">Reserves</a></li>
              <li><a href="concept-transaction-cost.html">Transaction Cost</a></li>
              <li><a href="concept-partial-payments.html">Partial Payments</a></li>
              <li><a href="concept-escrow.html">Escrow</a></li>
              <li><a href="concept-depositauth.html">Deposit Authorization</a></li>
          </ul>
        </div><!-- /.panel-body -->
      </div><!-- /#sidenav_collapse3 -->

    </div><!-- /.panel -->
    <div class="panel panel-default">
      <div class="panel-heading" role="tab" id="sidenav_cat_head_4">
        <h5 class="panel-title">
          <a class="collapsed" role="button" data-toggle="collapse" data-parent="#sidenav_accordion" href="#sidenav_collapse_4" aria-expanded="true" aria-controls="sidenav_collapse_4">
            XRP Tasks
          </a>
        </h5>
      </div><!-- /.panel-heading -->

      <div id="sidenav_collapse_4" class="collapse" role="tabpanel" aria-labelledby="sidenav_cat_head_4">
        <div class="panel-body">
          <ul class="sidebar_cat_pagelist">
              <li><a href="tutorial-rippleapi-beginners-guide.html">RippleAPI Beginners Guide</a></li>
              <li><a href="tutorial-reliable-transaction-submission.html">Reliable Transaction Submission</a></li>
              <li><a href="tutorial-multisign.html">How to Multi-Sign</a></li>
              <li><a href="tutorial-escrow.html">Escrow Tutorials</a></li>
              <li><a href="tutorial-paychan.html">Payment Channels Tutorial</a></li>
              <li><a href="tutorial-regular-keys.html">Working with a Regular Key Pair</a></li>
          </ul>
        </div><!-- /.panel-body -->
      </div><!-- /#sidenav_collapse4 -->

    </div><!-- /.panel -->
    <div class="panel panel-default">
      <div class="panel-heading" role="tab" id="sidenav_cat_head_5">
        <h5 class="panel-title">
          <a class="collapsed" role="button" data-toggle="collapse" data-parent="#sidenav_accordion" href="#sidenav_collapse_5" aria-expanded="true" aria-controls="sidenav_collapse_5">
            Issued Currencies
          </a>
        </h5>
      </div><!-- /.panel-heading -->

      <div id="sidenav_collapse_5" class="collapse" role="tabpanel" aria-labelledby="sidenav_cat_head_5">
        <div class="panel-body">
          <ul class="sidebar_cat_pagelist">
              <li><a href="concept-freeze.html">Freezing Issued Currencies</a></li>
              <li><a href="concept-transfer-fees.html">Transfer Fees</a></li>
              <li><a href="concept-noripple.html">Understanding the NoRipple Flag</a></li>
              <li><a href="concept-authorized-trust-lines.html">Authorized Trust Lines</a></li>
              <li><a href="concept-paths.html">Paths</a></li>
              <li><a href="concept-demurrage.html">Demurrage</a></li>
          </ul>
        </div><!-- /.panel-body -->
      </div><!-- /#sidenav_collapse5 -->

    </div><!-- /.panel -->
    <div class="panel panel-default">
      <div class="panel-heading" role="tab" id="sidenav_cat_head_6">
        <h5 class="panel-title">
          <a class="collapsed" role="button" data-toggle="collapse" data-parent="#sidenav_accordion" href="#sidenav_collapse_6" aria-expanded="true" aria-controls="sidenav_collapse_6">
            Checks
          </a>
        </h5>
      </div><!-- /.panel-heading -->

      <div id="sidenav_collapse_6" class="collapse" role="tabpanel" aria-labelledby="sidenav_cat_head_6">
        <div class="panel-body">
          <ul class="sidebar_cat_pagelist">
              <li><a href="concept-checks.html">Checks</a></li>
              <li><a href="tutorial-checks-send.html">How to Send a Check</a></li>
              <li><a href="tutorial-checks-lookup-by-sender.html">Look up Checks by sender address</a></li>
              <li><a href="tutorial-checks-lookup-by-recipient.html">Look up Checks by recipient address</a></li>
              <li><a href="tutorial-checks-cancel.html">Cancel a Check</a></li>
              <li><a href="tutorial-checks-cash-exact.html">Cash a Check for an exact amount</a></li>
              <li><a href="tutorial-checks-cash-flex.html">Cash a Check for a flexible amount</a></li>
          </ul>
        </div><!-- /.panel-body -->
      </div><!-- /#sidenav_collapse6 -->

    </div><!-- /.panel -->
    <div class="panel panel-default">
      <div class="panel-heading" role="tab" id="sidenav_cat_head_7">
        <h5 class="panel-title">
          <a class="collapsed" role="button" data-toggle="collapse" data-parent="#sidenav_accordion" href="#sidenav_collapse_7" aria-expanded="true" aria-controls="sidenav_collapse_7">
            The rippled Server
          </a>
        </h5>
      </div><!-- /.panel-heading -->

      <div id="sidenav_collapse_7" class="collapse" role="tabpanel" aria-labelledby="sidenav_cat_head_7">
        <div class="panel-body">
          <ul class="sidebar_cat_pagelist">
              <li><a href="tutorial-rippled-setup.html">Operating rippled Servers</a></li>
              <li><a href="concept-stand-alone-mode.html">Stand-Alone Mode</a></li>
              <li><a href="concept-history-sharding.html">History Sharding</a></li>
              <li><a href="tutorial-build-run-rippled-ubuntu.html">Build and Run rippled on Ubuntu</a></li>
          </ul>
        </div><!-- /.panel-body -->
      </div><!-- /#sidenav_collapse7 -->

    </div><!-- /.panel -->
    <div class="panel panel-default">
      <div class="panel-heading" role="tab" id="sidenav_cat_head_8">
        <h5 class="panel-title">
          <a class="collapsed" role="button" data-toggle="collapse" data-parent="#sidenav_accordion" href="#sidenav_collapse_8" aria-expanded="true" aria-controls="sidenav_collapse_8">
            The Exchange Business Model
          </a>
        </h5>
      </div><!-- /.panel-heading -->

      <div id="sidenav_collapse_8" class="collapse" role="tabpanel" aria-labelledby="sidenav_cat_head_8">
        <div class="panel-body">
          <ul class="sidebar_cat_pagelist">
              <li><a href="tutorial-listing-xrp.html">Listing XRP as an Exchange</a></li>
          </ul>
        </div><!-- /.panel-body -->
      </div><!-- /#sidenav_collapse8 -->

    </div><!-- /.panel -->
    <div class="panel panel-default">
      <div class="panel-heading" role="tab" id="sidenav_cat_head_9">
        <h5 class="panel-title">
          <a class="collapsed" role="button" data-toggle="collapse" data-parent="#sidenav_accordion" href="#sidenav_collapse_9" aria-expanded="true" aria-controls="sidenav_collapse_9">
            The Gateway Business Model
          </a>
        </h5>
      </div><!-- /.panel-heading -->

      <div id="sidenav_collapse_9" class="collapse" role="tabpanel" aria-labelledby="sidenav_cat_head_9">
        <div class="panel-body">
          <ul class="sidebar_cat_pagelist">
              <li><a href="concept-issuing-and-operational-addresses.html">Issuing and Operational Addresses</a></li>
              <li><a href="tutorial-gateway-guide.html">Becoming an XRP Ledger Gateway</a></li>
              <li><a href="gb-2015-06.html">GB-2015-06: Corrections to Autobridging</a></li>
              <li><a href="gb-2015-05.html">GB-2015-05: Historical Ledger Query Migration</a></li>
          </ul>
        </div><!-- /.panel-body -->
      </div><!-- /#sidenav_collapse9 -->

    </div><!-- /.panel -->
    <div class="panel panel-default">
      <div class="panel-heading" role="tab" id="sidenav_cat_head_10">
        <h5 class="panel-title">
          <a class="collapsed" role="button" data-toggle="collapse" data-parent="#sidenav_accordion" href="#sidenav_collapse_10" aria-expanded="true" aria-controls="sidenav_collapse_10">
            Reference Material
          </a>
        </h5>
      </div><!-- /.panel-heading -->

      <div id="sidenav_collapse_10" class="collapse" role="tabpanel" aria-labelledby="sidenav_cat_head_10">
        <div class="panel-body">
          <ul class="sidebar_cat_pagelist">
              <li><a href="reference-rippled.html">rippled</a></li>
              <li><a href="reference-currency.html">Currency Formats</a></li>
              <li><a href="reference-transaction-format.html">Transactions Overview</a></li>
              <li><a href="reference-ledger-format.html">XRP Ledger Data Format</a></li>
              <li><a href="reference-rippleapi.html">RippleAPI Reference</a></li>
              <li><a href="reference-data-api.html">Ripple Data API v2</a></li>
          </ul>
        </div><!-- /.panel-body -->
      </div><!-- /#sidenav_collapse10 -->

    </div><!-- /.panel -->
    <div class="panel panel-default">
      <div class="panel-heading" role="tab" id="sidenav_cat_head_11">
        <h5 class="panel-title">
          <a class="collapsed" role="button" data-toggle="collapse" data-parent="#sidenav_accordion" href="#sidenav_collapse_11" aria-expanded="true" aria-controls="sidenav_collapse_11">
            API Tools
          </a>
        </h5>
      </div><!-- /.panel-heading -->

      <div id="sidenav_collapse_11" class="collapse" role="tabpanel" aria-labelledby="sidenav_cat_head_11">
        <div class="panel-body">
          <ul class="sidebar_cat_pagelist">
              <li><a href="xrp-ledger-rpc-tool.html">RPC Tool</a></li>
              <li><a href="ripple-api-tool.html">WebSocket API Tool</a></li>
              <li><a href="data-api-v2-tool.html">Data API v2 Tool</a></li>
              <li><a href="ripple-txt-validator.html">ripple.txt Validator</a></li>
              <li><a href="xrp-test-net-faucet.html">XRP Test Net Faucet</a></li>
          </ul>
        </div><!-- /.panel-body -->
      </div><!-- /#sidenav_collapse11 -->

    </div><!-- /.panel -->

    <div class="panel panel-default">
      <div class="panel-heading" role="tab" id="sidenav_cat_head_ripple_resources">
        <h5 class="panel-title">
          <a class="collapsed" role="button" data-toggle="collapse" data-parent="#sidenav_accordion" href="#sidenav_collapse_ripple_resources" aria-expanded="true" aria-controls="sidenav_collapse_ripple_resources">
            Ripple Resources
          </a>
        </h5>
      </div><!-- /.panel-heading -->

      <div id="sidenav_collapse_ripple_resources" class="collapse" role="tabpanel" aria-labelledby="sidenav_cat_head_ripple_resources">
        <div class="panel-body">
          <ul class="sidebar_cat_pagelist">
            <li><a href="https://ripple.com/category/dev-blog/">Dev Blog</a></li>
            <li><a href="https://github.com/ripple/">Open Source on GitHub</a></li>
            <li><a href="https://ripple.com/">Corporate Website</a></li>
          </ul>
        </div><!-- /.panel-body -->
      </div><!-- /#sidenav_collapseripple_resources -->

    </div><!-- /.panel -->

  </div><!-- /#sidenav_accordion -->
</div><!-- /.guide_toc -->
      </aside>
      <main class="main" role="main" id="main_content_body">
    <h1 class="main-page-header">Reaching Consensus in the XRP Ledger</h1>

    <aside id="page-toc-wrapper" class="panel panel-default">
      <p class="in-this-doc panel-heading">In this document:</p>
      <ul class="dev_nav_sidebar panel-body" id="dactyl_toc_sidebar">
        <li class="level-1"><a href="#reaching-consensus-in-the-xrp-ledger">Reaching Consensus in the XRP Ledger</a></li>
<li class="level-1"><a href="#background">Background</a></li>
<li class="level-2"><a href="#mechanics">Mechanics</a></li>
<li class="level-2"><a href="#the-double-spend-problem">The Double Spend Problem</a></li>
<li class="level-1"><a href="#how-consensus-works">How Consensus Works</a></li>
<li class="level-2"><a href="#simplfying-the-problem">Simplfying the Problem</a></li>
<li class="level-2"><a href="#consensus-rules">Consensus Rules</a></li>
<li class="level-2"><a href="#consensus-rounds">Consensus Rounds</a></li>
<li class="level-2"><a href="#consensus-can-fail">Consensus Can Fail</a></li>
<li class="level-2"><a href="#how-the-xrp-ledger-handles-consensus-failure">How the XRP Ledger Handles Consensus Failure</a></li>
<li class="level-1"><a href="#philosophy">Philosophy</a></li>

      </ul>
    </aside>
    <div class='content no-1st-head'>
        <h1 id="reaching-consensus-in-the-xrp-ledger">Reaching Consensus in the XRP Ledger</h1>
<p>The XRP Ledger is a universal payment system enabling users to transfer funds (including fiat currencies, digital currencies and other forms of value) across national boundaries as seamlessly as sending an email. Like other digital currencies such as Bitcoin, the XRP Ledger enables peer-to-peer transaction settlement across a decentralized network of computers. Unlike other digital currency protocols,the XRP Ledger also allows users to transact in currencies other than the ledger's native currency, XRP. In addition, the technology enables near real-time settlement (three to six seconds) and is built to route each international transaction to the cheapest FX bid/ask spread available in the network.</p>
<h1 id="background">Background</h1>
<h2 id="mechanics">Mechanics</h2>
<p>At the core, the XRP Ledger is a shared database that records information such as accounts, balances, and offers to trade assets. Signed instructions called "transactions" cause changes such as creating accounts, making payments, and trading assets.</p>
<p>As a cryptographic system, the owners of XRP Ledger accounts are identified by cryptographic identities. Transactions are authorized by cryptographic signatures matching these identities. Every server processes every transaction according to the same deterministic, known rules. Ultimately, the goal is for every server in the network to have a complete copy of the exact same ledger state, without needing a single central authority to arbitrate transactions.</p>
<h2 id="the-double-spend-problem">The Double Spend Problem</h2>
<p>The "double spend" problem is a fundamental challenge to operating any sort of payment system. The problem comes from the requirement that when money is spent in one place, it can't also be spent in another place. More generally, the problem occurs when you have any two transactions such that either one is valid but not both together.</p>
<p>Suppose Alice, Bob, and Charlie are using a payment system, and Alice has a balance of $10. For the payment system to be useful, Alice must be able to send her $10 to Bob, or to Charlie. However, if Alice tries to send $10 to Bob and also send $10 to Charlie at the same time, that's where the double spend problem comes in.</p>
<p>If Alice can send the "same" $10 to both Charlie and Bob, the payment system ceases to be useful. The payment system needs a way to choose which transaction should succeed and which should fail, in such a way that all participants agree on which transaction has happened. Either of those two transactions is equally valid on its own. However, different participants in the payment system may have a different view of which transaction came first.</p>
<p>Conventionally, payment systems solve the double spend problem by having a central authority track and approve transactions. For example, a bank decides to clear a deck based on the issuer's available balance, of which the bank is the sole custodian. In such a system, all participants follow the central authority's decisions.</p>
<p>Distributed ledger technologies, like the XRP Ledger, have no central authority. They must solve the double spend problem in some other way.</p>
<h1 id="how-consensus-works">How Consensus Works</h1>
<h2 id="simplfying-the-problem">Simplfying the Problem</h2>
<p>Much of the double spend problem can be solved by well-known rules such as prohibiting an account from spending funds it does not have. In fact, the double spend problem can be reduced to putting transactions in order.</p>
<p>Consider the example of Alice trying to send the same $10 to both Bob and Charlie. If the payment to Bob is known to be first, then everyone can agree that she has the funds to pay Bob. If the payment to Charlie is known to be second, then everyone can agree that she cannot send those funds to Charlie because the money has already been sent to Bob.</p>
<p>We can also order transactions by deterministic rules. Because transactions are collections of digital information, it's trivial for a computer to sort them.</p>
<p>This would be enough to solve the double spend problem without a central authority, but it would require us to have every transaction that would ever occur (so that we could sort them) before we could be certain of the results of any transaction. Obviously, this is impractical. <!-- STYLE_OVERRIDE: obviously --></p>
<p>If we could collect transactions into groups and agree on those groupings, we could sort the transactions within that group. As long as every participant agrees on which transactions are to be processed as a unit, they can use deterministic rules to solve the double spend problem without any need for a central authority. The participants each sort the transactions and apply them in a deterministic way following the known rules. The XRP Ledger solves the double-spend problem in exactly this way.</p>
<p>The XRP Ledger allows multiple conflicting transactions to be in the agreed group. The group of transactions is executed according to deterministic rules, so whichever transaction comes first according to the sorting rules succeeds and whichever conflicting transaction comes second fails.</p>
<h2 id="consensus-rules">Consensus Rules</h2>
<p>The primary role of consensus is for participants in the process to agree on which transactions are to be processed as a group to resolve the double spend problem. There are four reasons this agreement is easier to achieve than might be expected:</p>
<ol>
<li>If there is no reason a transaction should not be included in such a group of transactions, all honest participants agree to include it. If all participants already agree, consensus has no work to do.</li>
<li>If there is any reason at all a transaction should not be included in such a group of transactions, all honest participants are willing to exclude it. If the transaction is still valid, there is no reason not to include it in the next round, and they should all agree to include it then.</li>
<li>It is extremely rare for a participant to particularly care how the transactions were grouped. Agreement is easiest when everyone’s priority is reaching agreement and only challenging when there are diverging interests.</li>
<li>Deterministic rules can be used even to form the groupings, leading to disagreement only in edge cases. For example, if there are two conflicting transactions in a round, deterministic rules can be used to determine which is included in the next round.</li>
</ol>
<p>Every participant’s top priority is correctness. They must first enforce the rules to be sure nothing violates the integrity of the shared ledger. For example, a transaction that is not properly signed must never be processed (even if other participants want to be processed). However, every honest participant’s second priority is agreement. A network with possible double spends has no utility at all. Agreement is facilitated by the fact that every honest participant values it above everything but correctness.</p>
<h2 id="consensus-rounds">Consensus Rounds</h2>
<p>A consensus round is an attempt to agree on a group of transactions so they can be processed. A consensus round starts with each participant who wishes to do so taking an initial position. This is the set of valid transactions they have seen.</p>
<p>Participants then “avalanche” to consensus: If a particular transaction does not have majority support, participants agree to defer that transaction. If a particular transaction does have majority support, participants agree to include the transaction. Thus slight majorities rapidly become full support and slight minorities rapidly become universal rejection from the current round.</p>
<p>To prevent consensus from stalling near 50% and to reduce the overlap required for reliable convergence, the required threshold to include a transaction increases over time. Initially, participants continue to agree to include a transaction if 50% or more of other participants agree. If participants disagree, they increase this threshold, first to 60% and then even higher, until all disputed transactions are removed from the current set. Any transactions removed this way are deferred to the next ledger version.</p>
<p>When a participant sees a supermajority that agrees on the set of transactions to next be processed, it declares a consensus to have been reached.</p>
<h2 id="consensus-can-fail">Consensus Can Fail</h2>
<p>It is not practical to develop a consensus algorithm that never fails to achieve perfect consensus. To understand why, consider how the consensus process finishes. At some point, each participant must declare that a consensus has been reached and that some set of transactions is known to be the result of the process. This declaration commits that participant irrevocably to some particular set of transactions as the result of the consensus process.</p>
<p>Some participant must do this first or no participant will ever do it, and they will never reach a consensus. Now, consider the participant that does this first. When this participant decides that consensus is finished, other participants have not yet made that decision. If they were incapable of changing the agreed set from their point of view, they would have already decided consensus was finished. So they must be still capable of changing their agreed set. <!-- STYLE_OVERRIDE: will --></p>
<p>In other words, for the consensus process to ever finish, some participant must declare that consensus has been reached on a set of transactions even though every other participant is theoretically still capable of changing the agreed upon set of transactions.</p>
<p>Imagine a group of people in a room trying to agree which door they should use to exit. No matter how much the participants discuss, at some point, <em>someone</em> has to be the first one to walk out of a door, even though the people behind that person could still change their minds and leave through the other door.</p>
<p>The probability of this kind of failure can be made very low, but it cannot be reduced to zero. The engineering tradeoffs are such that driving this probability down below about one in a thousand makes consensus significantly slower, and less able to tolerate network and endpoint failures.</p>
<h2 id="how-the-xrp-ledger-handles-consensus-failure">How the XRP Ledger Handles Consensus Failure</h2>
<p>After a consensus round completes, each participant applies the set of transactions that they believe were agreed to. This results in constructing what they believe the next state of the ledger should be.</p>
<p>Participants that are also validators then publish a cryptographic fingerprint of this next ledger. We call this fingerprint a “validation vote”. If the consensus round succeeded, the vast majority of honest validators should be publishing the same fingerprint.</p>
<p>Participants then collect these validation votes. From the validation votes, they can determine whether the previous consensus round resulted in a supermajority of participants agreeing on a set of transactions or not.</p>
<p>Participants then find themselves in one of three cases, in order of probability:</p>
<ol>
<li>They built the same ledger a supermajority agreed to. In this case, they can consider that ledger fully validated and rely on its contents.</li>
<li>They built a different ledger than a supermajority agreed on. In this case, they must build and accept the supermajority ledger. This typically indicates that they declared a consensus early and many other participants changed after that. They must “jump” to the super-majority ledger to resume operation.</li>
<li>No supermajority is clear from the received validations. In this case, the previous consensus round was wasted and a new round must occur before any ledger can be validated.</li>
</ol>
<p>Of course, case 1 is the most common. Case 2 does no harm to the network whatsoever. A small percentage of the participants could even fall into case 2 every round, and the network would work with no issues. Even those participants can recognize that they did not build the same ledger as the supermajority, so they know not to report their results as final until they are in agreement with the supermajority.</p>
<p>Case 3 results in the network losing a few seconds in which it could have made forward progress, but is extremely rare. In this case, the next consensus round is much less likely to fail because disagreements are resolved in the consensus process and only remaining disagreements can cause a failure.</p>
<p>On rare occasions, the network as a whole fails to make forward progress for a few seconds. In exchange, average transaction confirmation times are low.</p>
<h1 id="philosophy">Philosophy</h1>
<p>One form of reliability is the ability of a system to provide results even under conditions where some components have failed, some participants are malicious, and so on. While this is important, there is another form of reliability that is much more important in cryptographic payment systems — the ability of a system to produce results that can be relied upon. That is, when a system reports a result to us as reliable, we should be able to rely on that result.</p>
<p>Real-world systems, however, face operational conditions in which both kinds of reliability can be compromised. These include hardware failures, communication failures, and even dishonest participants. Part of the XRP Ledger's design philosophy is to detect conditions where the reliability of results are impaired and report them, rather than providing results that must not be relied on.</p>
<p>The XRP Ledger's consensus algorithm provides a robust alternative to proof of work systems, without consuming computational resources needlessly. Byzantine failures are possible, and do happen, but the consequence is only minor delays. In all cases, the XRP Ledger's consensus algorithm reports results as reliable only when they in fact are.</p>
    </div>
      </main>
  </div>

<footer class="content-info" role="contentinfo">
    <div class="container">
        <div class="row">
       		<div class="col-sm-12 absolute_bottom_footer">
       			<div class="col-sm-8">
                    <span>&copy; 2013 - 2018 Ripple. All Rights Reserved.</span>
                    <span><a href="https://ripple.com/terms-of-use/">Terms</a></span>
                    <span><a href="https://ripple.com/privacy-policy/">Privacy</a></span>
                    <span><a href="https://raw.githubusercontent.com/ripple/ripple-dev-portal/master/LICENSE">License</a></span>
                </div>
            </div><!-- /.absolute_bottom_footer -->

        </div><!-- /.row -->
    </div><!-- /.container -->
</footer>

<!-- Jump to top button -->
<a href="#main_content_wrapper" class="jump-to-top btn btn-primary btn-lg" role="button" title="Jump to top of page">Top</span></a>
<script type="text/javascript" src="assets/js/jump-to-top.js"></script>
</body>
</html>