<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width">

    <title>Open a Payment Channel to Enable an Inter-Exchange Network - XRP Ledger Dev Portal (日本語)</title>

    <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="assets/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicons/favicon-32x32.png">
    <link rel="manifest" href="assets/favicons/site.webmanifest">
    <link rel="shortcut icon" href="favicon.ico">
    <meta name="msapplication-TileColor" content="#25A768">
    <meta name="msapplication-config" content="assets/favicons/browserconfig.xml">
    <meta name="theme-color" content="#25A768">

    <!-- jQuery -->
    <script src="/ja/assets/vendor/jquery-1.11.1.min.js"></script>

    <!-- Stylesheet -->
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;700&display=swap" rel="stylesheet">
    <link href="/ja/assets/css/fonts-ja.css" rel="stylesheet" />
    <link href="/ja/assets/css/devportal.css" rel="stylesheet" />

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-45576805-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-45576805-2');
      gtag('config', 'UA-157720658-3', { 'linker': {
        'domains': ['blog.xpring.io', 'forum.xpring.io', 'xpring.io',
                    'xrpl.org', 'explorer.xrpl.org', 'testnet.xrpl.org']
        } }
      );
    </script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />




    <!-- expandable code samples -->
    <script src="assets/js/expandcode.js"></script>
    <!-- multi-code selection tabs -->
    <script src="assets/js/multicodetab.js"></script>
    <script>
        $(document).ready(function() {
            $(".multicode").minitabs();
            make_code_expandable();
        });
    </script>


</head>

<body class="xrp-ledger-dev-portal sidebar-primary lang-ja ">

<div class="container-fluid">
<nav class="top-nav navbar navbar-expand-lg navbar-dark row">
  <a href="/ja/" class="navbar-brand"><img src="/ja/assets/img/XRPLedger_DevPortal-white.svg" class="logo"  height="44" alt="XRP Ledger Dev Portal (日本語)" /></a>
  <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarHolder" aria-controls="navbarHolder" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse justify-content-end" id="navbarHolder">
    <ul class="nav navbar-nav">

            <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="topnav_overview.html" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">学ぶ</a>
        <div class="dropdown-menu" aria-labelledby="topnav_overview.html">
          <a class="dropdown-item top-level-1" href="overview.html">オーバービュー</a>
          <a class="dropdown-item top-level-1" href="uses.html">Uses</a>
          <a class="dropdown-item top-level-1" href="history.html">History</a>
          <a class="dropdown-item top-level-1" href="impact.html">Impact</a>
          <a class="dropdown-item top-level-1" href="carbon-calculator.html">Carbon Calculator</a>
        </div>
      </li>


            <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="topnav_explore.html" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">探る</a>
        <div class="dropdown-menu" aria-labelledby="topnav_explore.html">
          <a class="dropdown-item top-level-1" href="wallets.html">Wallets</a>
          <a class="dropdown-item top-level-1" href="exchanges.html">Exchanges</a>
          <a class="dropdown-item top-level-1" href="businesses.html">Businesses</a>
          <a class="dropdown-item top-level-1" href="https://livenet.xrpl.org/">Ledger Explorer</a>
        </div>
      </li>


            <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="topnav_docs.html" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">作る</a>
        <div class="dropdown-menu" aria-labelledby="topnav_docs.html">
          <a class="dropdown-item top-level-1" href="docs.html">ドキュメント</a>
          <a class="dropdown-item top-level-2" href="concepts.html">コンセプト</a>
          <a class="dropdown-item top-level-2" href="tutorials.html">チュートリアル</a>
          <a class="dropdown-item top-level-2" href="references.html">リファレンス</a>
          <a class="dropdown-item top-level-1" href="dev-tools.html">開発者用ツール</a>
          <a class="dropdown-item top-level-1" href="/blog/">ブログ</a>
        </div>
      </li>


      <li class="nav-item">
        <a class="nav-link" href="contribute.html">Contribute</a>
      </li>

<div class="nav-item github-edit-wrap">
    <a href="https://github.com/ripple/xrpl-dev-portal/edit/master/content/tutorials/use-complex-payment-types/open-a-payment-channel-to-enable-an-inter-exchange-network.md" target="_blank" class="nav-link github-edit">Edit</a>
</div><!-- /.github-edit -->
      <li class="nav-item dropdown" id="navbar-search">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown" id="topnav-search-dropdown-toggle"><i class="fa fa-search"></i><span class="sr-only">Open Search</span></a>
        <div class="dropdown-menu">
          <form class="navbar-form navbar-right" role="search">
            <div class="form-inline">
              <div class="input-group">
                <label class="input-group-prepend" for="topsearchbar"><i class="fa fa-search input-group-text"></i><span class="sr-only">サイトを検索</span></label>
                <input id="topsearchbox" name="q" type="text" class="form-control" placeholder="サイトを検索">
                <div class="input-group-append d-none d-lg-flex">
                  <button type="button" class="btn btn-default" data-toggle="dropdown" data-target="topnav-search-dropdown-toggle"><i class="fa fa-times"></i><span class="sr-only">Close Search</span></button>
                </div>
              </div><!--/.input-group-->
            </div>
          </form>
        </div><!--/.dropdown-menu-->
      </li><!--/.dropdown-->

      <li class="nav-item wrap-button">
        <a class="btn btn-outline-secondary nav-link" href="get-started.html">Get Started</a>
      </li>

    </ul><!-- /.navbar-nav -->

    <div class="nav navbar-nav language-selector">
      <div class="dropdown">
        <a class="nav-link dropdown-toggle with-caret" type="button" id="language_selector_header_btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          日本語
        </a>
        <div class="dropdown-menu smaller-dropdown" aria-labelledby="language_selector_header_btn">
          <a class="dropdown-item" href="/open-a-payment-channel-to-enable-an-inter-exchange-network.html">Eng</a>
          <a class="dropdown-item" href="/ja/open-a-payment-channel-to-enable-an-inter-exchange-network.html">日本語</a>
        </div><!--/.dropdown-menu-->
      </div><!--/.dropdown-->
    </div><!--/.language-selector-->
  </div><!--/#navbarHolder-->
</nav>
</div>
  <div class="container-fluid" role="document" id="main_content_wrapper">
    <div class="row">
      <!-- Right sidebar first so it's at the beginning for mobile layouts -->
      <aside class="right-sidebar col-lg-3 order-lg-4" role="complementary">
  <div class="card" id="page-toc-wrapper">
    <div class="card-header">
      <h4>目次</h4>
    </div>
    <ul class="card-body page-toc">
      <li class="level-1"><a href="#open-a-payment-channel-to-enable-an-inter-exchange-network">Open a Payment Channel to Enable an Inter-Exchange Network</a></li>
<li class="level-2"><a href="#why-send-xrp-to-other-exchanges">Why Send XRP to Other Exchanges?</a></li>
<li class="level-2"><a href="#benefits-of-using-a-payment-channel">Benefits of Using a Payment Channel</a></li>
<li class="level-2"><a href="#understand-payment-channels">Understand payment channels</a></li>
<li class="level-2"><a href="#payer-and-payee-set-up-and-run-rippled-servers">Payer and payee: Set up and run rippled servers</a></li>
<li class="level-2"><a href="#payer-and-payee-fund-xrp-ledger-accounts-with-enough-xrp">Payer and payee: Fund XRP Ledger accounts with enough XRP</a></li>
<li class="level-2"><a href="#payer-open-a-payment-channel">Payer: Open a payment channel</a></li>
<li class="level-2"><a href="#payee-verify-payment-channel-details">Payee: Verify payment channel details</a></li>
<li class="level-2"><a href="#payer-create-claims">Payer: Create claims</a></li>
<li class="level-2"><a href="#payer-send-claim-details-to-the-payer-exchange">Payer: Send claim details to the payer exchange</a></li>
<li class="level-2"><a href="#payee-verify-claims">Payee: Verify claims</a></li>
<li class="level-2"><a href="#payee-redeem-them-in-batches">Payee: Redeem them in batches</a></li>
<li class="level-2"><a href="#payer-and-payee-continue-to-use-the-payment-channel">Payer and payee: Continue to use the payment channel</a></li>
<li class="level-2"><a href="#payer-when-its-time-make-a-request-to-close-the-payment-channel">Payer: When it's time, make a request to close the payment channel</a></li>

    </ul>
  </div>
      </aside>

      <!-- main column -->
      <main class="main col-md-7 col-lg-6 order-md-3  " role="main" id="main_content_body">
<nav class="breadcrumbs-wrap p-0 p-md-3" aria-label="breadcrumb">
  <ul class="breadcrumb">
    <li class="breadcrumb-item"><a href="index.html">ホーム</a></li>
    <li class="active breadcrumb-item"><a href="docs.html">作る</a></li>
    <li class="active breadcrumb-item"><a href="tutorials.html">チュートリアル</a></li>
    <li class="active breadcrumb-item"><a href="use-specialized-payment-types.html">専門化した支払いタイプの使用</a></li>
    <li class="active breadcrumb-item"><a href="use-payment-channels.html">Payment Channelの使用</a></li>
    <li class="active breadcrumb-item">Open a Payment Channel to Enable an Inter-Exchange Network</li>
  </ul>
</nav><!--/.breadcrumbs-wrap-->  <article class="pt-3 p-md-3">
    <div class="devportal-callout note mb-5"><strong>も仕分けありませんがこのページは日本語では入手不可</strong>
      <p class="mb-0">XRP Ledger Dev Portalをさまざまな言語で提供するよう努力していますが、すべてのページがすべての言語で利用できるわけではありません。助けたいと思うなら<a href="https://github.com/ripple/xrpl-dev-portal/blob/master/CONTRIBUTING.ja.md">提供して下さい！</a></p>
    </div><!--/.devportal-callout-->
    <div class="content">
        <h1 id="open-a-payment-channel-to-enable-an-inter-exchange-network">Open a Payment Channel to Enable an Inter-Exchange Network</h1>
<p>A payment channel enables you to send one-way, "asynchronous" XRP payments that can be divided into very small increments and settled later. As a digital asset exchange, if you send many payments of XRP to another exchange, you can improve the efficiency of these payments by opening an XRP Ledger <a href="payment-channels.html">payment channel</a> between your exchange (the <em>payer</em> exchange) and the other exchange (the <em>payee</em> exchange). In the case of a two-way flow with another exchange, you can open two payment channels (one for each direction).</p>
<h2 id="why-send-xrp-to-other-exchanges">Why Send XRP to Other Exchanges?</h2>
<p>The need to send XRP from your exchange to another exchange may originate with your customers withdrawing XRP from your exchange and depositing it to the other exchange. If you are a large exchange, you probably have many customers moving XRP from your exchange into another exchange. You may be processing XRP payments all day long and for each payment, you are waiting for confirmation times, potentially at both ends of the transaction, as well as paying transaction costs.</p>
<h2 id="benefits-of-using-a-payment-channel">Benefits of Using a Payment Channel</h2>
<p>Here are some of the benefits of using a payment channel to send XRP instead of using individual payment transactions: <!-- --></p>
<ul>
<li>
<p><strong>Process withdrawals faster:</strong> A standard payment transaction involves submitting an XRP Ledger transaction and waiting for a new ledger version that includes the transaction to be approved by <a href="consensus.html">consensus</a>. When you use a payment channel to send XRP, creation and verification of a claim, which guarantees the payment of XRP, all happen outside of the consensus process. This means that the payer exchange can guarantee XRP payments to the payee exchange at a rate limited only by the participants' ability to create and verify the digital signatures of the claims.</p>
<p>For your customers who are moving XRP to take advantage of arbitrage opportunities or to do algorithmic trading, speed matters. Enabling a customer to move XRP and start trading in an instant is a compelling differentiator for your exchange.</p>
</li>
<li>
<p><strong>Connect to the Internet of Value:</strong> One of the key requirements of the <a class="external-link" href="https://ripple.com/insights/the-internet-of-value-what-it-means-and-how-it-benefits-everyone/" target="_blank">Internet of Value <i aria-hidden="true" class="fa fa-external-link"></i></a> is interoperability. The <a class="external-link" href="https://interledger.org/" target="_blank">Interledger Protocol <i aria-hidden="true" class="fa fa-external-link"></i></a> (ILP), which plays a large role in driving this interoperability, works best when it <a class="external-link" href="https://interledger.org/rfcs/0027-interledger-protocol-4" target="_blank">uses payment channels <i aria-hidden="true" class="fa fa-external-link"></i></a> as its method for rebalancing accounts. In effect, when you open a payment channel from your exchange to another, you are connecting to the Internet of Value and helping to create the inter-exchange network that is fundamental to the success of the Internet of Value and the apps that are built on it.</p>
<p>Connecting your exchange to other exchanges by way of payment channels is another differentiator. For customers who are moving XRP to buy various currencies across exchanges, knowing that they can move XRP at a moment's notice from your exchange to any number of exchanges in the Internet of Value can make your exchange a preferred place to custody their assets.</p>
</li>
</ul>
<p>Here’s a roadmap to the high-level tasks you’ll need to perform to implement this payment channel use case. To go directly to a full payment channels tutorial, see <a href="use-payment-channels.html">Use Payment Channels</a>.</p>
<!-- #{TODO: for the future: per Warren, it would be great to add diagrams for each step in the flow - showing claims and batch redemptions moving through the payment channel. Also, we have any recommendations around Payment Channel Managers, we can surface that here.}# -->
<h2 id="understand-payment-channels">Understand payment channels</h2>
<p>Learn more about payment channels and whether they provide the features you need for your specific implementation.</p>
<p><a class="button" href="payment-channels.html">Understand payment channels</a></p>
<h2 id="payer-and-payee-set-up-and-run-rippled-servers">Payer and payee: Set up and run <code>rippled</code> servers</h2>
<p>To use a payment channel to send and receive XRP, both the payer and payee exchanges must each have access to a <code>rippled</code> server that they can use to send transactions. If your exchange processes XRP withdrawals directly, you are probably already running a <code>rippled</code> server that you can use for this purpose.</p>
<p>If not, a great way for an exchange to get access to a <code>rippled</code> server is to set up and run one.</p>
<p><a class="button" href="manage-the-rippled-server.html">Set up and run rippled servers</a></p>
<h2 id="payer-and-payee-fund-xrp-ledger-accounts-with-enough-xrp">Payer and payee: Fund XRP Ledger accounts with enough XRP</h2>
<p>If your exchange processes XRP deposits and withdrawals directly, you probably have existing funded XRP Ledger accounts that you can use for this purpose. Ensure that they are funded with enough XRP as described here.</p>
<p>Along these lines, there's a good chance that you are following industry best practices and have a cold account plus one or more hot accounts. Use the hot accounts for your payment channels.</p>
<ul>
<li>
<p>The payer exchange must have a funded XRP Ledger account to be used to send XRP to the payee exchange.</p>
<p>Aside from the <a href="reserves.html">base reserve</a> (20 XRP) and the <a href="reserves.html#所有者準備金">owner reserve</a> of a payment channel (5 XRP), the account must also be able to set aside enough XRP in the payment channel to cover the intended number of transactions.</p>
<p>The payer exchange can always top-off the channel using the <a href="paymentchannelfund.html">PaymentChannelFund</a> transaction if it runs out of XRP. However, topping-off requires an actual on-ledger transaction and confirmation, so it could take 4-5 seconds of processing time and ~10 drops of XRP to complete the top-off transaction. The more XRP the payer exchange pre-funds, the less often they need to top-off, so they can save some time and money by pre-funding more XRP.</p>
<p>However, if the payer exchange puts in more XRP than they need, they need to <a href="use-payment-channels.html#9-支払人と受取人の取引完了後支払人はchannelの閉鎖を要求します">close the payment channel</a> to get the XRP back. This means waiting out the following events:</p>
<ol>
<li>Completion of the payer's request to start closing the payment channel.</li>
<li>Passage of the <code>SettleDelay</code> time set for the payment channel.</li>
<li>Completion of a request to finish closing the payment channel after the <code>SettleDelay</code> has passed.</li>
</ol>
</li>
<li>
<p>The payee exchange must have a funded XRP Ledger account to be used to redeem (receive) XRP sent by the payer exchange.</p>
<p>The account needs at least 21 XRP, which provides the 20 XRP <a href="reserves.html">base reserve</a>, plus enough to pay the transaction costs of redeeming claims, which are trivial. For example, you could redeem thousands of claims for less than 1 XRP in total.</p>
</li>
</ul>
<p><a class="button" href="accounts.html">Fund XRP Ledger accounts with enough XRP</a></p>
<h2 id="payer-open-a-payment-channel">Payer: <a href="use-payment-channels.html#1-支払人が特定の受取人へのpayment-channelを作成します">Open a payment channel</a></h2>
<p>The payer exchange opens a payment channel from their XRP Ledger account to the payee exchange's XRP Ledger account. Opening a payment channel includes setting certain specifics of the channel, such as its expiration date and the amount it can hold.</p>
<p>For this exchange use case, there is no real need to ever close the channel, so the payer exchange may not want to define a <code>CancelAfter</code> (expiration) value. If they ever need to close the channel, they can still do so.</p>
<p>As the payer exchange, you can think of the payment channel as a special sub-wallet exclusively for a particular destination. Consider estimating how much XRP the payment channel requires similar to how you would estimate a hot wallet's needs. According to <a href="issuing-and-operational-addresses.html">typical best practices</a>, exchanges hold the vast majority of XRP across all of their user accounts in a cold wallet, with a small amount of XRP in a hot wallet.</p>
<p>Along these lines, you should also decide approximately how often you want to add more XRP to the payment channel---for example, daily, every 4 hours, or every 15 minutes---and estimate the volume of XRP that you send to the payee exchange during that interval. You should fund the payment channel with enough to cover at least that much volume or the largest withdrawal that you want to process without delay, whichever is larger. For example, if you plan to refill the channel every 15 minutes, have an average volume of 50 XRP every 15 minutes, but occasionally send transfers of 10,000 XRP, you should supply the channel with at least 10,000 XRP.</p>
<p>For withdrawals that are larger than the amount of XRP you have in the payment channel, you must process them specially. Either you can send large withdrawals as normal XRP payments, skipping the payment channel entirely, or you can first send a transaction to add the full withdrawal amount to the payment channel before creating claims for those. (See below for details on creating claims.)</p>
<p>If either exchange has multiple hot accounts in the XRP Ledger, the two exchanges should each designate a specific hot account to use with the payment channel between them. Although there are other potentially viable configurations, this use case assumes a configuration with one payment channel connecting two exchanges. This channel can serve all customers sending XRP from the payer exchange to the payee exchange.</p>
<p>Since payment channels are unidirectional, you need a second channel in the opposite direction to send XRP from the <em>payee</em> exchange to the <em>payer</em> exchange. This second channel does not need to connect the exact same pair of hot accounts, but it is most convenient to do so. With two unidirectional channels, each exchange can use the XRP it redeems from its incoming channel to refill its outgoing channel.</p>
<h2 id="payee-verify-payment-channel-details">Payee: Verify payment channel details</h2>
<p>The payee exchange reviews the details of the payment channel.</p>
<p><a class="button" href="use-payment-channels.html#2-受取人がpayment-channelの特性を確認します">Verify payment channel details</a></p>
<h2 id="payer-create-claims">Payer: Create claims</h2>
<p>The payer exchange creates one or more claims for amounts of XRP that it wants to guarantee to the payee exchange.</p>
<p><a class="button" href="use-payment-channels.html#3-支払人がchannelのxrpに対して1つ以上の署名付き-クレーム-を作成します">Create claims</a></p>
<h2 id="payer-send-claim-details-to-the-payer-exchange">Payer: Send claim details to the payer exchange</h2>
<p>After creating a claim, the payer exchange must send details of the claim to the payee exchange, off-ledger.</p>
<p>Consider a series of claims prompted by payer exchange customers withdrawing XRP and depositing it to the payee exchange. In this case, the payer and payee exchanges should agree on the information the payer exchange must send for each claim to enable the payee exchange to correctly credit its customers' accounts. For example, consider sharing the following claim information off-ledger:</p>
<p><strong>Channel ID</strong>: <code>7C02D0802B272599889ADFA4298FD92E4C8BD5120ED9A5BA3884CF636F9B4029</code></p>
<p><strong>Public key</strong>: <code>023D9BFCC22FB9A997E45ACA0D2D679A6A1AE5589E51546F3EDC4E9B16713FC255</code></p>
<table>
<thead>
<tr>
<th align="left">Sequence</th>
<th align="left">Signature</th>
<th align="left">Amount</th>
<th align="left">Destination Tag</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">1</td>
<td align="left"><code>3045022100CE6E...</code></td>
<td align="left">2000</td>
<td align="left">12345678</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><code>304402200C304A...</code></td>
<td align="left">3000</td>
<td align="left">23456781</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><code>30450221009849...</code></td>
<td align="left">4000</td>
<td align="left">34567812</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th align="left">Claim Information</th>
<th align="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><strong>Channel ID</strong></td>
<td align="left">Payment channel the payer exchange used to create the claim. The payee exchange needs this value to verify and redeem the claim.</td>
</tr>
<tr>
<td align="left"><strong>Public key</strong></td>
<td align="left">Public key the payer exchange used to open the payment channel. The payee exchange needs this value to verify and redeem the claim.</td>
</tr>
<tr>
<td align="left"><strong>Sequence</strong></td>
<td align="left">A value that indicates the sequence in which the payer exchange created the claims. The payee exchange needs this value to keep track of and redeem claims in the correct order. For example, if the payer exchange did not provide the sequence value and the payee exchange lost track of the second claim above, the payee exchange might incorrectly credit 2000 XRP to destination tag 34567812. If the payer exchange did provide the sequence value, the payee exchange would know that it needs to account for a claim between claim 1 and claim 3. With claim 2 accounted for, the payee exchange could correctly credit 1000 XRP to destination tag 23456781 and 1000 XRP to destination tag 34567812.</td>
</tr>
<tr>
<td align="left"><strong>Signature</strong></td>
<td align="left">Signature of the claim. The payee exchange needs this value to verify and redeem the claim.</td>
</tr>
<tr>
<td align="left"><strong>Amount</strong></td>
<td align="left">Cumulative amount of the claims created by the payer exchange. The payee exchange needs this value to verify and redeem the claim. For information about how to calculate the actual amount the payee exchange needs to credit the customer, see <a href="#payee-verify-claims">Verify claims</a>.</td>
</tr>
<tr>
<td align="left"><strong>Destination Tag</strong></td>
<td align="left">Destination tag of the customer account on the payee exchange that needs to be credited based on the claim. The payer exchange can get this value from their customer's withdrawal request, which should provide a destination tag for the deposit to the payee exchange. When the payee exchange redeems claims, the XRP is deposited into the payee exchange's XRP Ledger account. The payee exchange can then credit the XRP from the claim to the appropriate customer account based on the destination tag provided.</td>
</tr>
</tbody>
</table>
<p><a class="button" href="use-payment-channels.html#4-支払人が商品またはサービスに対する支払いとしてクレームを受取人に送信します">Send claim details to the payer exchange</a></p>
<h2 id="payee-verify-claims">Payee: Verify claims</h2>
<p>The payee exchange verifies claims sent by the payer exchange.</p>
<p>After verifying claims, the payee exchange should credit the claimed XRP to the customer accounts indicated by the destination tags sent by the payer exchange. Because claim amounts are cumulative, the payee exchange needs to be careful to credit the customer for only the <em>the difference from the previous claim</em>.</p>
<p>For example, to know how much to credit a customer for a claim amount of 3000, the payee exchange needs to know that the previous claim amount was 2000. The difference between the claim amount and the previous claim amount (3000 - 2000 = 1000) is the amount the payee exchange must credit to the customer account.</p>
<p><a class="button" href="use-payment-channels.html#5-受取人がクレームを検証します">Verify claims</a></p>
<h2 id="payee-redeem-them-in-batches">Payee: Redeem them in batches</h2>
<p>The payee exchange can redeem batches of claims after verifying them to receive the XRP guaranteed by the payer exchange. Here are some guidelines the payee exchange can use to decide how often to redeem claims:</p>
<ul>
<li>
<p>Don't redeem every claim. That's not gaining any benefit from the payment channels.</p>
</li>
<li>
<p>Don't wait until you have more in claims than you're scared to lose. If something goes wrong and you miss your chance to redeem a claim, you don't get paid. If that happens and you have already credited one or more customers in your system, you could be in trouble. Those customers may have already traded the XRP for other cryptocurrencies and withdrawn them. That leaves you with more XRP owed in your system than you were holding for your customers, and it's too late to correct the balances of the customers whose deposits you didn't receive.</p>
</li>
<li>
<p>If the payer requests to close the channel, you won't get paid if you don't redeem your claims before it finishes closing. The amount of time you have is based on the <code>SettleDelay</code>.</p>
</li>
<li>
<p>If the channel was created with an immutable <code>CancelAfter</code> time, be sure to redeem all outstanding claims before that time.</p>
</li>
<li>
<p>You can decide to redeem, for example, after a certain amount of time, after accumulating a certain amount of credit, or based on other criteria you care about, such as how much you trust the payer exchange. The safest strategy is probably based on a combination of these criteria.</p>
</li>
</ul>
<!-- #{ TODO: Talk to some active PayChan users like Coil people to get some more specific recommendations. But I imagine that settling every few minutes or even hours could make sense depending on how much the payee exchange trusts the payer exchange, how many transactions they do how rapidly, etc. }# -->
<p><a class="button" href="use-payment-channels.html#8-準備が完了すれば受取人は承認された額のクレームを清算します">Redeem them in batches</a></p>
<h2 id="payer-and-payee-continue-to-use-the-payment-channel">Payer and payee: Continue to use the payment channel</h2>
<p>Payer and payee exchanges can continue to send, verify, and redeem batches of claims as needed within the parameters set by the payment channel.</p>
<p><a class="button" href="use-payment-channels.html#7-必要に応じてステップ36を繰り返します">Continue to use the payment channel</a></p>
<h2 id="payer-when-its-time-make-a-request-to-close-the-payment-channel">Payer: When it's time, make a request to close the payment channel</h2>
<p>When the payer exchange and payee exchange are done using the payment channel, the payer exchange can make a request to close the payment channel.</p>
<p><a class="button" href="use-payment-channels.html#9-支払人と受取人の取引完了後支払人はchannelの閉鎖を要求します">Close the payment channel</a></p>
    </div>
  </article>
      </main>
      <!-- Left sidebar last so it's at the end for mobile -->
      <aside class="sidebar col-md-5 col-lg-3 order-md-1" role="complementary">
<div class="tree-nav">

  <!---->
    <div class="sidenav_parent">
      <a href="tutorials.html"> チュートリアル</a>
    </div>

  <!---->

    <!---->
    <div id="sidenav" role="tablist" aria-multiselectable="true">
        <!---->
          <div class="card">
            <div class="card-header" role="tab" id="sidenav_cat_head_2">
                <a class="collapsed sidenav_cat_toggler" role="button" data-toggle="collapse" href="#sidenav_collapse_2" aria-expanded="true" aria-controls="sidenav_collapse_2"></a>
              <h5 class="card-title">
                  <a class="sidenav_cat_title" href="get-started.html">使用開始</a>
                <!-- <a class="sidenav_cat_title" href="get-started.html">Get Started</a> -->
              </h5>
            </div><!-- /.card-header -->

            <div id="sidenav_collapse_2" class="collapse" role="tabpanel" aria-labelledby="sidenav_cat_head_2">
              <div class="card-body">
                <ul class="sidebar_pagelist">
                      <li><a class="nosubcat-page" href="get-started-with-the-rippled-api.html">XRP Ledger APIの使用開始</a></li>
                      <li><a class="nosubcat-page" href="get-started-with-rippleapi-for-javascript.html">RippleAPI入門ガイド</a></li>
                      <li><a class="nosubcat-page" href="send-xrp.html">XRPの送金</a></li>
                      <li><a class="nosubcat-page" href="monitor-incoming-payments-with-websocket.html">WebSocketを使用した着信ペイメントの監視</a></li>

                </ul>
              </div><!-- /.card-body -->
            </div><!-- /#sidenav_collapse2 -->

          </div><!-- /.card -->

        <!---->
          <div class="card">
            <div class="card-header" role="tab" id="sidenav_cat_head_8">
                <a class="collapsed sidenav_cat_toggler" role="button" data-toggle="collapse" href="#sidenav_collapse_8" aria-expanded="true" aria-controls="sidenav_collapse_8"></a>
              <h5 class="card-title">
                  <a class="sidenav_cat_title" href="production-readiness.html">Production Readiness</a>
                <!-- <a class="sidenav_cat_title" href="production-readiness.html">Production Readiness</a> -->
              </h5>
            </div><!-- /.card-header -->

            <div id="sidenav_collapse_8" class="collapse" role="tabpanel" aria-labelledby="sidenav_cat_head_8">
              <div class="card-body">
                <ul class="sidebar_pagelist">
                      <li><a class="nosubcat-page" href="set-up-secure-signing.html">安全な署名の設定</a></li>
                      <li><a class="nosubcat-page" href="look-up-transaction-results.html">トランザクションの結果の確認</a></li>
                      <li><a class="nosubcat-page" href="reliable-transaction-submission.html">信頼できるトランザクションの送信</a></li>

                </ul>
              </div><!-- /.card-body -->
            </div><!-- /#sidenav_collapse8 -->

          </div><!-- /.card -->

        <!---->
          <div class="card">
            <div class="card-header" role="tab" id="sidenav_cat_head_13">
                <a class="collapsed sidenav_cat_toggler" role="button" data-toggle="collapse" href="#sidenav_collapse_13" aria-expanded="true" aria-controls="sidenav_collapse_13"></a>
              <h5 class="card-title">
                  <a class="sidenav_cat_title" href="manage-account-settings.html">アカウントの設定の利用</a>
                <!-- <a class="sidenav_cat_title" href="manage-account-settings.html">Manage Account Settings</a> -->
              </h5>
            </div><!-- /.card-header -->

            <div id="sidenav_collapse_13" class="collapse" role="tabpanel" aria-labelledby="sidenav_cat_head_13">
              <div class="card-body">
                <ul class="sidebar_pagelist">
                      <li><a class="nosubcat-page" href="assign-a-regular-key-pair.html">レギュラーキーペアの割り当て</a></li>
                      <li><a class="nosubcat-page" href="change-or-remove-a-regular-key-pair.html">レギュラーキーペアの変更または削除</a></li>
                      <li><a class="nosubcat-page" href="disable-master-key-pair.html">Disable Master Key Pair</a></li>
                      <li><a class="nosubcat-page" href="set-up-multi-signing.html">マルチ署名の設定</a></li>
                      <li><a class="nosubcat-page" href="send-a-multi-signed-transaction.html">マルチ署名済みトランザクションの送信</a></li>
                      <li><a class="nosubcat-page" href="require-destination-tags.html">宛先タグの要求</a></li>
                      <li><a class="nosubcat-page" href="offline-account-setup.html">オフラインでのアカウント設定のチュートリアル</a></li>

                </ul>
              </div><!-- /.card-body -->
            </div><!-- /#sidenav_collapse13 -->

          </div><!-- /.card -->

        <!---->
          <div class="card active">
            <div class="card-header" role="tab" id="sidenav_cat_head_21">
                <a class="sidenav_cat_toggler" role="button" data-toggle="collapse" href="#sidenav_collapse_21" aria-expanded="true" aria-controls="sidenav_collapse_21"></a>
              <h5 class="card-title">
                  <a class="sidenav_cat_title active-parent" href="use-specialized-payment-types.html">専門化した支払いタイプの使用</a>
                <!-- <a class="sidenav_cat_title" href="use-specialized-payment-types.html">Use Specialized Payment Types</a> -->
              </h5>
            </div><!-- /.card-header -->

            <div id="sidenav_collapse_21" class="collapse show" role="tabpanel" aria-labelledby="sidenav_cat_head_21">
              <div class="card-body">
                <ul class="sidebar_pagelist">
                      <li><a class="subcat-title" href="use-escrows.html">Escrowの使用</a></li>

                          <li><a class="subpage" href="send-a-time-held-escrow.html">時間に基づくEscrowの送信</a></li>
                          <li><a class="subpage" href="send-a-conditionally-held-escrow.html">条件に基づくEscrowの送信</a></li>
                          <li><a class="subpage" href="cancel-an-expired-escrow.html">有効期限切れEscrowの取消し</a></li>
                          <li><a class="subpage" href="look-up-escrows.html">Escrowの検索</a></li>
                          <li><a class="subpage" href="use-an-escrow-as-a-smart-contract.html">Use an Escrow as a Smart Contract</a></li>

                      <li><a class="subcat-title active-parent" href="use-payment-channels.html">Payment Channelの使用</a></li>

                          <li><a class="active subpage" href="#main_content_body">Open a Payment Channel to Enable an Inter-Exchange Network</a></li>

                      <li><a class="subcat-title" href="use-checks.html">Checksの使用</a></li>

                          <li><a class="subpage" href="send-a-check.html">Checkの送信</a></li>
                          <li><a class="subpage" href="cash-a-check-for-an-exact-amount.html">Checkの正確な金額での換金</a></li>
                          <li><a class="subpage" href="cash-a-check-for-a-flexible-amount.html">Checkの変動金額での換金</a></li>
                          <li><a class="subpage" href="cancel-a-check.html">Checkの取消し</a></li>
                          <li><a class="subpage" href="look-up-checks-by-sender.html">送金元に基づくCheckの検索</a></li>
                          <li><a class="subpage" href="look-up-checks-by-recipient.html">受取人に基づくCheckの検索</a></li>


                </ul>
              </div><!-- /.card-body -->
            </div><!-- /#sidenav_collapse21 -->

          </div><!-- /.card -->

        <!---->
          <div class="card">
            <div class="card-header" role="tab" id="sidenav_cat_head_38">
                <a class="collapsed sidenav_cat_toggler" role="button" data-toggle="collapse" href="#sidenav_collapse_38" aria-expanded="true" aria-controls="sidenav_collapse_38"></a>
              <h5 class="card-title">
                  <a class="sidenav_cat_title" href="xrp-ledger-businesses.html">XRP Ledgerが利用する会社について</a>
                <!-- <a class="sidenav_cat_title" href="xrp-ledger-businesses.html">XRP Ledger Businesses</a> -->
              </h5>
            </div><!-- /.card-header -->

            <div id="sidenav_collapse_38" class="collapse" role="tabpanel" aria-labelledby="sidenav_cat_head_38">
              <div class="card-body">
                <ul class="sidebar_pagelist">
                      <li><a class="nosubcat-page" href="list-xrp-as-an-exchange.html">取引所としてのXRPの上場</a></li>
                      <li><a class="nosubcat-page" href="list-your-exchange-on-xrp-charts.html">XRP Chartsへの取引所の登録</a></li>
                      <li><a class="nosubcat-page" href="become-an-xrp-ledger-gateway.html">Become an XRP Ledger Gateway</a></li>

                </ul>
              </div><!-- /.card-body -->
            </div><!-- /#sidenav_collapse38 -->

          </div><!-- /.card -->

        <!---->
          <div class="card">
            <div class="card-header" role="tab" id="sidenav_cat_head_42">
                <a class="collapsed sidenav_cat_toggler" role="button" data-toggle="collapse" href="#sidenav_collapse_42" aria-expanded="true" aria-controls="sidenav_collapse_42"></a>
              <h5 class="card-title">
                  <a class="sidenav_cat_title" href="manage-the-rippled-server.html">rippledサーバの利用</a>
                <!-- <a class="sidenav_cat_title" href="manage-the-rippled-server.html">Manage the rippled Server</a> -->
              </h5>
            </div><!-- /.card-header -->

            <div id="sidenav_collapse_42" class="collapse" role="tabpanel" aria-labelledby="sidenav_cat_head_42">
              <div class="card-body">
                <ul class="sidebar_pagelist">
                      <li><a class="subcat-title" href="install-rippled.html">rippledのインストール</a></li>

                          <li><a class="subpage" href="system-requirements.html">システム要件</a></li>
                          <li><a class="subpage" href="install-rippled-on-centos-rhel-with-yum.html">yumを使用したCentOS/Red Hatへのインストール</a></li>
                          <li><a class="subpage" href="install-rippled-on-ubuntu.html">UbuntuまたはDebian Linuxへのインストール</a></li>
                          <li><a class="subpage" href="update-rippled-automatically-on-linux.html">Linuxでの自動更新</a></li>
                          <li><a class="subpage" href="update-rippled-manually-on-centos-rhel.html">CentOS/Red Hatでの手動更新</a></li>
                          <li><a class="subpage" href="update-rippled-manually-on-ubuntu.html">UbuntuまたはDebianでの手動更新</a></li>
                          <li><a class="subpage" href="build-run-rippled-ubuntu.html">Ubuntuでのrippledの構築と実行</a></li>
                          <li><a class="subpage" href="build-run-rippled-macos.html">macOSでのrippledの構築と実行</a></li>
                          <li><a class="subpage" href="capacity-planning.html">容量の計画</a></li>
                          <li><a class="subpage" href="rippled-1-3-migration-instructions.html">rippled v1.3.xへの移行手順</a></li>

                      <li><a class="subcat-title" href="configure-rippled.html">rippledの設定</a></li>

                          <li><a class="subpage" href="run-rippled-as-a-validator.html">バリデータとしてのrippledの実行</a></li>
                          <li><a class="subpage" href="run-rippled-as-a-wallet-server.html">Run rippled as a Wallet Server</a></li>
                          <li><a class="subpage" href="configure-statsd.html">Configure StatsD</a></li>
                          <li><a class="subpage" href="connect-your-rippled-to-the-xrp-test-net.html">XRPL Altnetへのrippledの接続</a></li>
                          <li><a class="subpage" href="configure-online-deletion.html">オンライン削除の設定</a></li>
                          <li><a class="subpage" href="configure-advisory-deletion.html">指示による削除の設定</a></li>
                          <li><a class="subpage" href="configure-history-sharding.html">履歴シャーディングの設定</a></li>
                          <li><a class="subpage" href="configure-full-history.html">全履歴の設定</a></li>
                          <li><a class="subpage" href="configure-grpc.html">Configure gRPC</a></li>
                          <li><a class="subpage" href="enable-public-signing.html">パブリック署名の有効化</a></li>

                      <li><a class="subcat-title" href="configure-peering.html">ピアリングの設定</a></li>

                          <li><a class="subpage" href="cluster-rippled-servers.html">rippledサーバーのクラスター化</a></li>
                          <li><a class="subpage" href="configure-a-private-server.html">プライベートサーバーの設定</a></li>
                          <li><a class="subpage" href="configure-the-peer-crawler.html">Configure the Peer Crawler</a></li>
                          <li><a class="subpage" href="enable-link-compression.html">Enable Link Compression</a></li>
                          <li><a class="subpage" href="forward-ports-for-peering.html">ピアリングのポート転送</a></li>
                          <li><a class="subpage" href="manually-connect-to-a-specific-peer.html">特定のピアへの手動接続</a></li>
                          <li><a class="subpage" href="set-max-number-of-peers.html">ピアの最大数の設定</a></li>
                          <li><a class="subpage" href="use-a-peer-reservation.html">ピアリザベーションの使用</a></li>

                      <li><a class="subcat-title" href="use-stand-alone-mode.html">スタンドアロンモードでrippledをテスト</a></li>

                          <li><a class="subpage" href="start-a-new-genesis-ledger-in-stand-alone-mode.html">スタンドアロンモードでの新しいジェネシスレジャーの開始</a></li>
                          <li><a class="subpage" href="load-a-saved-ledger-in-stand-alone-mode.html">スタンドアロンモードでの保存済みレジャーの読み込み</a></li>
                          <li><a class="subpage" href="advance-the-ledger-in-stand-alone-mode.html">スタンドアロンモードでレジャーを進める</a></li>

                      <li><a class="subcat-title" href="troubleshoot-the-rippled-server.html">rippledのトラブルシューティング</a></li>

                          <li><a class="subpage" href="health-check-interventions.html">Health Check Interventions</a></li>
                          <li><a class="subpage" href="diagnosing-problems.html">rippledの問題の診断</a></li>
                          <li><a class="subpage" href="understanding-log-messages.html">ログメッセージについて</a></li>
                          <li><a class="subpage" href="server-doesnt-sync.html">rippledサーバーが同期しない</a></li>
                          <li><a class="subpage" href="server-wont-start.html">rippledサーバーが起動しない</a></li>
                          <li><a class="subpage" href="fix-sqlite-tx-db-page-size-issue.html">SQLiteトランザクションデータベースのページサイズの問題の解決</a></li>


                </ul>
              </div><!-- /.card-body -->
            </div><!-- /#sidenav_collapse42 -->

          </div><!-- /.card -->

    </div><!-- /#sidenav -->
</div><!-- /.tree_nav -->      </aside>
    </div><!--/.row (main layout)-->
  </div>

<footer class="xrpl-footer" role="contentinfo">
  <section class="container card-grid card-grid-Nx1">

        <div class="card">
          <div class="card-header">
            <h5><a href="overview.html">学ぶ</a></h5>
          </div><!--/.card-header-->
          <div class="card-body">




<div class="children-display">
  <ul>
            <li class="level-1"><a href="uses.html">Uses</a></li>

        <li class="level-1"><a href="history.html">History</a></li>

        <li class="level-1"><a href="impact.html">Impact</a></li>

        <li class="level-1"><a href="carbon-calculator.html">Carbon Calculator</a></li>



  </ul>
</div>          </div><!--/.card-body-->
        </div><!--/.card -->


        <div class="card">
          <div class="card-header">
            <h5><a href="explore.html">探る</a></h5>
          </div><!--/.card-header-->
          <div class="card-body">




<div class="children-display">
  <ul>
            <li class="level-1"><a href="wallets.html">Wallets</a></li>

        <li class="level-1"><a href="exchanges.html">Exchanges</a></li>

        <li class="level-1"><a href="businesses.html">Businesses</a></li>



  </ul>
</div>          </div><!--/.card-body-->
        </div><!--/.card -->


        <div class="card">
          <div class="card-header">
            <h5><a href="docs.html">作る</a></h5>
          </div><!--/.card-header-->
          <div class="card-body">




<div class="children-display">
  <ul>
              <li class="level-1"><a href="concepts.html">コンセプト</a></li>
          <li class="level-1"><a href="tutorials.html">チュートリアル</a></li>
          <li class="level-1"><a href="references.html">リファレンス</a></li>
          <li class="level-1"><a href="dev-tools.html">開発者用ツール</a></li>


  </ul>
</div>          </div><!--/.card-body-->
        </div><!--/.card -->


        <div class="card">
          <div class="card-header">
            <h5><a href="contribute.html">Contribute</a></h5>
          </div><!--/.card-header-->
          <div class="card-body">




<div class="children-display">
  <ul>
            <li class="level-1"><a href="contribute-code.html">Contribute Code to the XRP Ledger</a></li>



  </ul>
</div>          </div><!--/.card-body-->
        </div><!--/.card -->

  </section>

  <section class="container">

    <div class="absolute_bottom_footer">
      <span>&copy; XRP Ledger Project 2020</span>
      <span><a href="https://raw.githubusercontent.com/ripple/ripple-dev-portal/master/LICENSE">ライセンス</a></span>
    </div><!-- /.absolute_bottom_footer -->

  </section>
</footer>

<!-- Jump to top button -->
<a href="#main_content_wrapper" class="jump-to-top btn btn-primary" role="button" title="このページの先頭へ">先頭へ</a>
<script type="text/javascript" src="assets/js/jump-to-top.js"></script>

<!-- Non-blocking resources -->
<!-- Bootstrap JS -->
<script src="assets/vendor/bootstrap.min.js"></script>
<!-- fontawesome icons -->
<link rel="stylesheet" href="assets/vendor/fontawesome/css/font-awesome.min.css" />

<!-- Algolia DocSearch -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
apiKey: '70de5b9b8ef95460f3c6e04054b325b2',
indexName: 'xrpl',
inputSelector: '#topsearchbox',
algoliaOptions: { 'facetFilters': ["lang:ja"] },
debug: false
});
</script>

<script type="application/javascript">
  gtag('config', 'UA-157720658-3', {'content_group1': 'Content Docs'});
</script>
</body>
</html>